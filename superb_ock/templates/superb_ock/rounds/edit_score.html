{% extends "superb_ock/base.html" %}
{% block content %}

<div class="container mt-4">
    <h2 class="text-primary">Enter Scores</h2>
    
    <form method="POST" action="{% url 'edit_score' round_id hole %}">
        {% csrf_token %}
        
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Player</th>
                    <th>Shots Taken</th>
                    <th>Stableford</th>
                </tr>
            </thead>
            <tbody>
                {% for score in scores %}
                <tr>
                    <td>{{ score.player_id }}</td>
                    <td>
                        <div class="input-group">
                            <button type="button" class="btn btn-danger btn-lg" onclick="adjustValue('shots_{{ score.id }}', -1)">-</button>
                            <input type="number" class="form-control text-center" name="shots_{{ score.id }}" id="shots_{{ score.id }}" value="{{ score.shots_taken }}" min="0">
                            <button type="button" class="btn btn-success btn-lg" onclick="adjustValue('shots_{{ score.id }}', 1)">+</button>
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <button type="button" class="btn btn-danger btn-lg" onclick="adjustValue('stableford_{{ score.id }}', -1)">-</button>
                            <input type="number" class="form-control text-center" name="stableford_{{ score.id }}" id="stableford_{{ score.id }}" value="{{ score.stableford }}" min="0">
                            <button type="button" class="btn btn-success btn-lg" onclick="adjustValue('stableford_{{ score.id }}', 1)">+</button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        
        <button type="submit" class="btn btn-primary btn-lg">Submit Scores</button>
    </form>
</div>

<script>
    function adjustValue(fieldId, delta) {
        let input = document.getElementById(fieldId);
        let currentValue = parseInt(input.value) || 0;
        let newValue = Math.max(0, currentValue + delta); // Ensure value never goes below 0
        input.value = newValue;
    }
</script>

{% endblock content %}